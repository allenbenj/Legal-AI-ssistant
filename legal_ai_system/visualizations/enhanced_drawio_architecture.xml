<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="Legal AI System Generator" version="22.1.11" etag="legal-ai-enhanced">
  <diagram name="Legal AI System - Enhanced Architecture" id="legal-ai-enhanced">
    <mxGraphModel dx="2000" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Background Gradient -->
        <mxCell id="background" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=none;gradientColor=#e9ecef;gradientDirection=south;" vertex="1" parent="1">
          <mxGeometry x="20" y="20" width="1560" height="1160" as="geometry" />
        </mxCell>
        
        <!-- Title -->
        <mxCell id="title" value="🏛️ Legal AI Assistant System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#2c3e50;" vertex="1" parent="1">
          <mxGeometry x="600" y="40" width="400" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="subtitle" value="Comprehensive Legal Document Processing &amp; Analysis Platform" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#7f8c8d;" vertex="1" parent="1">
          <mxGeometry x="550" y="80" width="500" height="20" as="geometry" />
        </mxCell>
        
        <!-- Frontend Layer -->
        <mxCell id="frontend-layer" value="🖥️ Frontend Layer - React 18 + TypeScript" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9b59b6;fontColor=#ffffff;fontSize=16;fontStyle=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="120" width="1520" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="react-frontend" value="📱 enhanced-legal-ai-gui2.tsx&#xa;🔧 React 18 + TypeScript + Vite&#xa;🗂️ Zustand State Management&#xa;🎨 Tailwind CSS + Shadcn/ui&#xa;📡 REST + GraphQL + WebSocket Integration&#xa;⚡ Real-time Document Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#8e24aa;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="200" width="280" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="frontend-features" value="✨ Frontend Features&#xa;• Document Upload &amp; Preview&#xa;• Real-time Analysis Results&#xa;• Interactive Knowledge Graph&#xa;• Legal Entity Visualization&#xa;• Violation Detection Alerts&#xa;• Confidence Score Display&#xa;• Export to Multiple Formats" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#8e24aa;strokeWidth=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="400" y="200" width="220" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="tech-stack" value="🛠️ Technology Stack&#xa;• Node.js 18+ Runtime&#xa;• TypeScript for Type Safety&#xa;• React Router for Navigation&#xa;• Axios for HTTP Requests&#xa;• Socket.io for Real-time&#xa;• Chart.js for Visualizations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#8e24aa;strokeWidth=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="200" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- API Gateway Layer -->
        <mxCell id="api-layer" value="🌐 API Gateway Layer - FastAPI + GraphQL + WebSocket" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f39c12;fontColor=#ffffff;fontSize=16;fontStyle=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="1520" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="fastapi-main" value="🚀 api/main.py&#xa;⚡ FastAPI Async Server&#xa;🔐 JWT Authentication&#xa;📊 GraphQL Schema&#xa;🔌 WebSocket Real-time&#xa;📝 OpenAPI Documentation&#xa;🛡️ CORS &amp; Security Headers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdeaa7;strokeColor=#f57c00;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="440" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="integration-service" value="🔗 api/integration_service.py&#xa;🎯 Service Orchestration&#xa;🔄 Request/Response Mapping&#xa;⚡ Async Task Management&#xa;🎪 Workflow Coordination&#xa;📊 Performance Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fdeaa7;strokeColor=#f57c00;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="440" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="api-endpoints" value="📋 API Endpoints&#xa;• POST /documents/process&#xa;• GET /analysis/{id}/status&#xa;• WS /stream/results&#xa;• GraphQL /graphql&#xa;• GET /health/system&#xa;• POST /auth/login" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;strokeWidth=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="560" y="440" width="180" height="120" as="geometry" />
        </mxCell>
        
        <!-- Central Service Container -->
        <mxCell id="service-container-main" value="🧠 CENTRAL NERVOUS SYSTEM - Service Container" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e74c3c;fontColor=#ffffff;fontSize=18;fontStyle=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="600" width="1520" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="unified-services" value="🎯 unified_services.py&#xa;🏗️ ServiceContainer&#xa;💉 Dependency Injection&#xa;🔄 Lifecycle Management&#xa;📊 46 Service Dependencies&#xa;⚡ Lazy Loading&#xa;🔧 Service Health Monitoring&#xa;🎪 Circuit Breaker Pattern" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#c0392b;strokeWidth=3;shadow=1;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="690" width="200" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="service-proxy" value="🔄 LazyServiceProxy&#xa;🧩 Circular Dependency Resolution&#xa;⚡ On-demand Initialization&#xa;🔧 Dynamic Service Loading&#xa;🎯 Type-safe Proxies" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#c0392b;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="690" width="180" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="service-states" value="⚡ ServiceState Management&#xa;🔄 INITIALIZING → Loading&#xa;✅ RUNNING → Active&#xa;⏸️ SHUTTING_DOWN → Cleanup&#xa;🛑 SHUTDOWN → Complete&#xa;📊 Real-time State Tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#c0392b;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="540" y="690" width="180" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="service-metrics" value="📊 ServiceMetrics&#xa;⏱️ Performance Tracking&#xa;💾 Memory Usage Monitoring&#xa;🔥 CPU Usage Analytics&#xa;📈 Request Rate Limiting&#xa;🚨 Health Check Status" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fadbd8;strokeColor=#c0392b;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="760" y="690" width="180" height="140" as="geometry" />
        </mxCell>
        
        <!-- LLM Provider Section -->
        <mxCell id="llm-section" value="🤖 LLM Provider Ecosystem - Multi-Model Intelligence" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3498db;fontColor=#ffffff;fontSize=16;fontStyle=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="600" width="580" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="grok-models" value="🚀 xAI/Grok Models (Primary)&#xa;🧠 grok-3-mini (Fast Analysis)&#xa;🔬 grok-3-reasoning (Complex Logic)&#xa;⚖️ grok-2-1212 (Balanced)&#xa;⚡ Auto-switching by Task&#xa;🎯 Legal Domain Optimized" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#aed6f1;strokeColor=#2980b9;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="980" y="690" width="180" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="model-switcher" value="🔄 model_switcher.py&#xa;🎯 Dynamic Model Selection&#xa;📊 Task Complexity Analysis&#xa;⚡ Automatic Fallback&#xa;💰 Cost Optimization&#xa;🎪 Performance Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#aed6f1;strokeColor=#2980b9;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1200" y="690" width="180" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="fallback-providers" value="🛡️ Fallback Providers&#xa;🏠 Ollama (Local/Privacy)&#xa;🌐 OpenAI (Cloud Backup)&#xa;🔐 Offline Processing&#xa;⚡ Auto-failover Logic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#aed6f1;strokeColor=#2980b9;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1420" y="690" width="140" height="140" as="geometry" />
        </mxCell>
        
        <!-- Storage & Knowledge Layer -->
        <mxCell id="storage-layer" value="🗄️ Storage & Knowledge Layer - Multi-Modal Data Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2ecc71;fontColor=#ffffff;fontSize=16;fontStyle=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="870" width="1520" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="knowledge-graph" value="🕸️ knowledge_graph_enhanced.py&#xa;🔗 Neo4j Integration&#xa;⚖️ Legal Entity Relationships&#xa;🏛️ Case Law Connections&#xa;👥 Person-Document Links&#xa;📊 Graph Analytics&#xa;🔍 Cypher Query Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="950" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="vector-store" value="🔍 vector_store_enhanced.py&#xa;⚡ FAISS High-Speed Search&#xa;📊 LanceDB Structured Storage&#xa;🎯 Hybrid Similarity Matching&#xa;🧠 Embedding Management&#xa;📈 Performance Optimization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="320" y="950" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="memory-manager" value="🧠 unified_memory_manager.py&#xa;💾 Session Memory&#xa;🔄 Context Management&#xa;📝 Auto-summarization&#xa;🎯 Smart Context Windows&#xa;⚡ Memory Optimization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="560" y="950" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="security-manager" value="🛡️ security_manager.py&#xa;🔐 Authentication & Authorization&#xa;🔏 Input Validation&#xa;🚨 Threat Detection&#xa;📊 Access Control&#xa;🎯 Audit Logging" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="800" y="950" width="180" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="config-manager" value="⚙️ configuration_manager.py&#xa;🔧 Dynamic Configuration&#xa;🌍 Environment Management&#xa;🔄 Hot-reload Settings&#xa;📊 Validation Rules&#xa;🎯 Feature Flags" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1020" y="950" width="180" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="error-recovery" value="🚨 error_recovery.py&#xa;🔄 Circuit Breaker Pattern&#xa;⚡ Auto-retry Logic&#xa;🛡️ Graceful Degradation&#xa;📊 Failure Analytics&#xa;🎯 Recovery Strategies" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f4e6;strokeColor=#27ae60;strokeWidth=2;shadow=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1240" y="950" width="180" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="performance-metrics" value="📊 Performance Dashboard&#xa;⚡ Avg Response: 250ms&#xa;🔥 CPU Usage: 15-30%&#xa;💾 Memory: 2-4GB Peak&#xa;📈 Throughput: 50 docs/min&#xa;✅ Uptime: 99.9%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f8f5;strokeColor=#27ae60;strokeWidth=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1460" y="950" width="100" height="120" as="geometry" />
        </mxCell>
        
        <!-- Connection Arrows with Enhanced Styling -->
        <!-- Frontend to API -->
        <mxCell id="frontend-to-api" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#e67e22;shadow=1;endArrow=classic;endFill=1;startArrow=none;startFill=0;" edge="1" parent="1" source="react-frontend" target="fastapi-main">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- API to Services -->
        <mxCell id="api-to-services" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#e67e22;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="fastapi-main" target="unified-services">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="integration-to-services" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#e67e22;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="integration-service" target="unified-services">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Service Container Internal -->
        <mxCell id="services-to-proxy" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c0392b;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="service-proxy">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-states" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c0392b;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="service-states">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#c0392b;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="service-metrics">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Services to LLM -->
        <mxCell id="services-to-grok" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#2980b9;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="grok-models">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="grok-to-switcher" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2980b9;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="grok-models" target="model-switcher">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="switcher-to-fallback" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2980b9;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="model-switcher" target="fallback-providers">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Services to Storage -->
        <mxCell id="services-to-knowledge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="knowledge-graph">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-vector" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="vector-store">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-memory" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="memory-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-security" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="security-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-config" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="config-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="services-to-recovery" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#27ae60;shadow=1;endArrow=classic;endFill=1;" edge="1" parent="1" source="unified-services" target="error-recovery">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#bdc3c7;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="200" width="680" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="🎯 Architecture Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#2c3e50;" vertex="1" parent="1">
          <mxGeometry x="1060" y="210" width="200" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-content" value="🖥️ Frontend: React + TypeScript UI&#xa;🌐 API Gateway: FastAPI + GraphQL&#xa;🧠 Service Container: 46 Dependencies&#xa;🤖 LLM Providers: xAI/Grok Primary&#xa;🗄️ Storage: Neo4j + FAISS + LanceDB&#xa;⚡ Real-time: WebSocket Streams&#xa;🛡️ Security: JWT + Input Validation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#34495e;" vertex="1" parent="1">
          <mxGeometry x="880" y="235" width="660" height="80" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>